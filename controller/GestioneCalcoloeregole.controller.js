sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/routing/History","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/m/TabContainerItem","sap/m/MessageBox","sap/m/library","sap/ui/core/library","sap/ui/core/Core"],function(e,t,a,o,l,i,n,r,s){"use strict";var I=n.TimePickerMaskMode,d=r.ValueState;return e.extend("vodafone.RepintApprov.repintapproval.controller.GestioneCalcoloeregole",{onInit:function(){this.getOwnerComponent().getRouter().getRoute("GestioneCalcoloeregole").attachPatternMatched(this._onObjectMatched,this);this.byId("TP1").setMaskMode(I.On);this.byId("TP2").setMaskMode(I.On);var e={SelectedLivello:"1",LivelloCollection:[{ValoreId:"1",Value:"1"},{ValoreId:"2",Value:"2"},{ValoreId:"6",Value:"3"},{ValoreId:"Q",Value:"4"},{ValoreId:"Q8",Value:"5"}]};var t=new o(e);this.getView().byId("idLivelloCollection").setModel(t,"livelloModel");var a={SelectedTipo:"1",TipoGiornoCollection:[{TipoGioId:"1",Value:"FERIALE LLUN-VEN1"},{TipoGioId:"2",Value:"FERIALE LLUN-VEN2"},{TipoGioId:"3",Value:"FERIALE LLUN-VEN3"},{TipoGioId:"4",Value:"FERIALE LLUN-VEN4"},{TipoGioId:"5",Value:"FERIALE LLUN-VEN5"}]};var l=new o(a);this.getView().byId("idTipoCollection").setModel(l,"TipooModel");s.attachParseError(function(e){var t=e.getParameter("element");if(t.setValueState){t.setValueState(d.Error)}});s.attachValidationSuccess(function(e){var t=e.getParameter("element");if(t.setValueState){t.setValueState(d.None)}})},onAddImpIntItem:function(e){if(this.getView().byId("idTableImpIntData").getModel("ImpIntDataModel")===undefined){var t=this.getView().byId("idTableImpInv");this.mainData={ImportIInterCollection:[{TipoGiorno:t.getItems()[0].getCells()[0].getSelectedItem().getText(),OraInizio:t.getItems()[0].getCells()[1].getValue(),Orafine:t.getItems()[0].getCells()[2].getValue(),Valore:t.getItems()[0].getCells()[3].getValue(),Livello:t.getItems()[0].getCells()[4].getSelectedItem().getText(),oEdit:true,oDelete:true}]};this.oModelImpIntData=new o(this.mainData);this.getView().byId("idTableImpIntData").setModel(this.oModelImpIntData,"ImpIntDataModel")}else{var a=this.getView().byId("idTableImpIntData").getModel("ImpIntDataModel").getProperty("/ImportIInterCollection");var t=this.getView().byId("idTableImpInv");var l={TipoGiorno:t.getItems()[0].getCells()[0].getSelectedItem().getText(),OraInizio:t.getItems()[0].getCells()[1].getValue(),Orafine:t.getItems()[0].getCells()[2].getValue(),Valore:t.getItems()[0].getCells()[3].getValue(),Livello:t.getItems()[0].getCells()[4].getSelectedItem().getText(),oEdit:true,oDelete:true};a.push(l);this.getView().byId("idTableImpIntData").getModel("ImpIntDataModel").setProperty("/ImportIInterCollection",a)}},onEdit:function(e){var t=e.getSource().getParent();var a=this.getView().byId("idTableImpIntData");var o=a.indexOfItem(t);var l=a.getModel("ImpIntDataModel").getObject("/ImportIInterCollection")[o];if(l){var i=a.getItems()[o];this.onPress(i,false);var n=a.getItems()[o];if(e.getSource().getPressed()){this.onPress(n,true)}else{this.onPress(n,false)}}},onPress:function(e,t){var a=e.getCells();for(var o=0;o<a.length-2;o++){var l=a[o];var i=l.getMetadata();var n=i.getElementName();if(n=="sap.m.Input"){l.setEnabled(t);l.setEditable(t)}}},onDelete:function(e){var t=e.getSource().getBindingContext("ImpIntDataModel").getObject();for(var a=0;a<this.mainData.ImportIInterCollection.length;a++){if(this.mainData.ImportIInterCollection[a]==t){this.mainData.ImportIInterCollection.splice(a,1);this.oModelImpIntData.refresh();break}}},handleChange:function(e){var t=e.getSource(),a=e.getParameter("value"),o=e.getParameter("valid");if(o){t.setValueState(d.None)}else{t.setValueState(d.Error)}},_onObjectMatched:function(e){},handleBack:function(e){var a=t.getInstance().getPreviousHash();if(a!==undefined){history.go(-1)}else{this.getOwnerComponent().getRouter().navTo("object")}}})});